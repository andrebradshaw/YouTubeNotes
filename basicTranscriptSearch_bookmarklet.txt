javascript:(function()%7Bvar%20reg%20%3D%20(x%2C%20n)%20%3D%3E%20x%20%3F%20x%5Bn%5D%20%3A%20''%3Bvar%20cn%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementsByClassName(s)%20%3A%20console.log(o)%3Bvar%20tn%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementsByTagName(s)%20%3A%20console.log(o)%3Bvar%20gi%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementById(s)%20%3A%20console.log(o)%3Bvar%20ele%20%3D%20(t)%20%3D%3E%20document.createElement(t)%3Bvar%20attr%20%3D%20(o%2C%20k%2C%20v)%20%3D%3E%20o.setAttribute(k%2C%20v)%3Bvar%20unq%20%3D%20(arr)%20%3D%3E%20arr.filter((e%2C%20p%2C%20a)%20%3D%3E%20a.indexOf(e)%20%3D%3D%20p)%3Bfunction%20dragElement()%20%7Bvar%20elmnt%20%3D%20this.parentElement%3Bvar%20pos1%20%3D%200%2Cpos2%20%3D%200%2Cpos3%20%3D%200%2Cpos4%20%3D%200%3Bif%20(document.getElementById(this.id))%20%7Bdocument.getElementById(this.id).onmousedown%20%3D%20dragMouseDown%3B%7D%20else%20%7Bthis.onmousedown%20%3D%20dragMouseDown%3B%7Dfunction%20dragMouseDown(e)%20%7Bpos3%20%3D%20e.clientX%3Bpos4%20%3D%20e.clientY%3Bdocument.onmouseup%20%3D%20closeDragElement%3Bdocument.onmousemove%20%3D%20elementDrag%3B%7Dfunction%20elementDrag(e)%20%7Bpos1%20%3D%20pos3%20-%20e.clientX%3Bpos2%20%3D%20pos4%20-%20e.clientY%3Bpos3%20%3D%20e.clientX%3Bpos4%20%3D%20e.clientY%3Belmnt.style.top%20%3D%20(elmnt.offsetTop%20-%20pos2)%20%2B%20%22px%22%3Belmnt.style.left%20%3D%20(elmnt.offsetLeft%20-%20pos1)%20%2B%20%22px%22%3Belmnt.style.opacity%20%3D%20%220.85%22%3Belmnt.style.transition%20%3D%20%22opacity%20700ms%22%3B%7Dfunction%20closeDragElement()%20%7Bdocument.onmouseup%20%3D%20null%3Bdocument.onmousemove%20%3D%20null%3Belmnt.style.opacity%20%3D%20%221%22%3B%7D%7Dasync%20function%20getTranscripts(href%2C%20doc)%20%7Bvar%20shareEntity%20%3D%20reg(%2F(%3F%3C%3DserializedShareEntity%22%3A%22).%2B%3F(%3F%3D%25)%2F.exec(doc.body.outerHTML)%2C%200)%3Bvar%20trackingParams%20%3D%20reg(%2F(%3F%3C%3D%22clickTrackingParams%22%3A%22).%2B%3F(%3F%3D%22)%2F.exec(doc.body.outerHTML)%2C%200)%3Bvar%20xsrf%20%3D%20reg(%2F(%3F%3C%3D%22XSRF_TOKEN%22%3A%22).%2B%3F(%3F%3D%22)%2F.exec(doc.head.innerHTML)%2C%200)%3Bvar%20csn%20%3D%20reg(%2F(%3F%3C%3D%22csn%22%3A%22).%2B%3F(%3F%3D%22)%2F.exec(doc.body.outerHTML)%2C%200)%3Bvar%20id_token%20%3D%20reg(%2F(%3F%3C%3DID_TOKEN%22%3A%22).%2B%3F(%3F%3D%22)%2F.exec(doc.head.innerHTML)%2C%200)%3Bvar%20res%20%3D%20await%20fetch(%22https%3A%2F%2Fwww.youtube.com%2Fservice_ajax%3Fname%3DgetTranscriptEndpoint%22%2C%20%7B%22credentials%22%3A%20%22include%22%2C%22headers%22%3A%20%7B%22accept%22%3A%20%22*%2F*%22%2C%22accept-language%22%3A%20%22en-US%2Cen%3Bq%3D0.9%22%2C%22content-type%22%3A%20%22application%2Fx-www-form-urlencoded%22%2C%22x-client-data%22%3A%20%22CI22yQEIprbJAQjBtskBCKmdygEIqKPKAQixp8oBCOKoygEI8anKAQiPqsoBCNesygEYz6rKAQ%3D%3D%22%2C%22x-spf-previous%22%3A%20'https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D'%20%2B%20href%2C%22x-spf-referer%22%3A%20'https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D'%20%2B%20href%2C%22x-youtube-client-name%22%3A%20%221%22%2C%22x-youtube-client-version%22%3A%20%222.20190620%22%2C%22x-youtube-identity-token%22%3A%20id_token%2C%22x-youtube-page-cl%22%3A%20%22254043953%22%2C%22x-youtube-page-label%22%3A%20%22youtube.ytfe.desktop_20190619_6_RC0%22%2C%22x-youtube-utc-offset%22%3A%20%22-240%22%2C%22x-youtube-variants-checksum%22%3A%20%220b3fdca47a187a4f660169cc54d2d985%22%7D%2C%22referrer%22%3A%20'https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D'%20%2B%20href%2C%22referrerPolicy%22%3A%20%22origin-when-cross-origin%22%2C%22body%22%3A%20%22sej%3D%257B%2522clickTrackingParams%2522%253A%2522%22%20%2B%20trackingParams%20%2B%20%22%2522%252C%2522commandMetadata%2522%253A%257B%2522webCommandMetadata%2522%253A%257B%2522url%2522%253A%2522%252Fservice_ajax%2522%252C%2522sendPost%2522%253Atrue%257D%257D%252C%2522getTranscriptEndpoint%2522%253A%257B%2522params%2522%253A%2522%22%20%2B%20shareEntity%20%2B%20%22%25253D%25253D%2522%257D%257D%26csn%3D%22%20%2B%20csn%20%2B%20%22%26session_token%3D%22%20%2B%20xsrf%20%2B%20%22%253D%22%2C%22method%22%3A%20%22POST%22%2C%22mode%22%3A%20%22cors%22%7D)%3Bvar%20d%20%3D%20await%20res.json()%3Bvar%20tBod%20%3D%20d.data.actions%5B0%5D.openTranscriptAction.transcriptRenderer.transcriptRenderer.body%3Bvar%20cues%20%3D%20tBod%20%3F%20tBod.transcriptBodyRenderer.cueGroups.map(el%20%3D%3E%20%5Bel.transcriptCueGroupRenderer.cues%5B0%5D.transcriptCueRenderer.cue.simpleText%2C%20el.transcriptCueGroupRenderer.cues%5B0%5D.transcriptCueRenderer.durationMs%2C%20el.transcriptCueGroupRenderer.cues%5B0%5D.transcriptCueRenderer.startOffsetMs%5D)%20%3A%20null%3Breturn%20cues%3B%7Dasync%20function%20getVideoTrans(path)%20%7Bvar%20res%20%3D%20await%20fetch(%22https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D%22%20%2B%20path)%3Bvar%20text%20%3D%20await%20res.text()%3Bvar%20doc%20%3D%20new%20DOMParser().parseFromString(text%2C%20'text%2Fhtml')%3Bvar%20transcripts%20%3D%20await%20getTranscripts(path%2C%20doc)%3Breturn%20transcripts%3B%7Dasync%20function%20createHTMLSearchBox(path)%20%7Bvar%20transcripts%20%3D%20await%20getVideoTrans(path)%3Bvar%20mapped%20%3D%20''%3Bif(transcripts)%7Btranscripts.forEach(el%20%3D%3E%20%7Bmapped%20%3D%20mapped%20%2B%20el%5B0%5D%20%2B%20'%20t_'%20%2B%20Math.round(el%5B2%5D%20%2F%201000)%20%2B%20'%20'%7D)%3Bconsole.log(mapped)%3B%7Dif%20(gi(document%2C%20'trans_search_container'))%20gi(document%2C%20'trans_search_container').outerHTML%20%3D%20''%3Bvar%20cont%20%3D%20ele('div')%3Battr(cont%2C%20'id'%2C%20'trans_search_container')%3Battr(cont%2C%20'style'%2C%20'padding%3A%206px%3B%20position%3A%20fixed%3B%20top%3A%201%25%3B%20left%3A%201%25%3B%20width%3A%20380px%3B%20z-index%3A%2011111%3B')%3Bdocument.body.appendChild(cont)%3Bvar%20head%20%3D%20ele('div')%3Battr(head%2C%20'id'%2C%20'trans_search_head')%3Battr(head%2C%20'style'%2C%20'padding%3A%206px%3B%20background%3A%20%23004471%3B%20color%3A%20%23fff%3B%20border-radius%3A%200.2em%3B%20border%3A%201.5px%20solid%20%23004471%3B%20height%3A%2014px%3B%20cursor%3A%20move%3B')%3Bcont.appendChild(head)%3Bhead.addEventListener('mouseover'%2CdragElement)%3Bvar%20close%20%3D%20ele('div')%3Battr(close%2C%20'id'%2C%20'trans_search_close')%3Battr(close%2C%20'style'%2C%20'padding%3A%201px%3B%20background%3A%20transparent%3B%20color%3A%20crimson%3B%20float%3A%20left%3B%20transform%3A%20scale(3%2C%201.8)%3B%20cursor%3A%20pointer%3B')%3Bclose.innerText%20%3D%20'X'%3Bhead.appendChild(close)%3Bclose.addEventListener('click'%2Ckill2xParents)%3Bvar%20bod%20%3D%20ele('div')%3Battr(bod%2C%20'id'%2C%20'trans_search_body')%3Battr(bod%2C%20'style'%2C%20'padding%3A%206px%3B%20background%3A%20%23fff%3B%20color%3A%20%23000%3B%20border-radius%3A%200.2em%3B%20border%3A%201.5px%20solid%20%23004471%3B')%3Bcont.appendChild(bod)%3Bif(transcripts)%7Bvar%20searchBox%20%3D%20ele('input')%3Battr(searchBox%2C%20'id'%2C%20'trans_search_searchBox')%3Battr(searchBox%2C%20'placeholder'%2C%20'Transcript%20Search%20-%20Press%20Enter%20to%20run')%3Battr(searchBox%2C%20'style'%2C%20'padding%3A%206px%3B%20background%3A%20%23fff%3B%20color%3A%20%23004471%3B%20border-radius%3A%200.2em%3B%20border%3A%201px%20solid%20%23004471%3B%20width%3A%2094%25%3B')%3Bbod.appendChild(searchBox)%3BsearchBox.addEventListener('keydown'%2C%20(e)%20%3D%3E%20%7Bif%20(%2FEnter%2Fi.test(e.key.toString()))%20%7BrunSearch()%3B%7D%7D)%3B%7Delse%7Bvar%20searchBox%20%3D%20ele('div')%3Battr(searchBox%2C%20'style'%2C%20'padding%3A%206px%3B%20background%3A%20%23fff%3B%20color%3A%20%23004471%3B%20border-radius%3A%200.2em%3B%20border%3A%201px%20solid%20%23004471%3B%20width%3A%2094%25%3B')%3Bbod.appendChild(searchBox)%3BsearchBox.innerText%20%3D%20'This%20video%20doesnt%20have%20transcripts%20%C2%AF%5C_(%E3%83%84)_%2F%C2%AF'%3B%7Dfunction%20runSearch()%20%7Bif%20(gi(document%2C%20'search_resContainer'))%20gi(document%2C%20'search_resContainer').outerHTML%20%3D%20''%3Bvar%20matchingLinks%20%3D%20%5B%5D%3Bvar%20bool%20%3D%20gi(document%2C%20'trans_search_searchBox').value.replace(%2F%5Cs*%5C*%5Cs*%2Fg%2C%20'%5C%5Cs*%5C%5Cw*%5C%5Cs%2B')%3Bvar%20x%20%3D%20bool%20%3F%20new%20RegExp(bool%20%2B%20'.%2B%3F(t_%5C%5Cd%2B)'%2C%20'i')%20%3A%20null%3Bvar%20matches%20%3D%20x%20%3F%20mapped.match(new%20RegExp(bool%20%2B%20'.%2B%3F(t_%5C%5Cd%2B)'%2C%20'ig'))%20%3A%20%5B%5D%3Bif%20(matches)%20%7Bmatches.forEach(el%20%3D%3E%20%7Bvar%20matchedStr%20%3D%20x%20%3F%20reg(x.exec(el)%2C%201).replace(%2Ft_%2F%2C%20'')%20%3A%20null%3Bvar%20second%20%3D%20matchedStr%20%3F%20parseInt(matchedStr)%20%3A%20null%3Bvar%20moveback%20%3D%20second%20%26%26%20second%20%3E%202%20%3F%20second%20-%203%20%3A%20null%3Bvar%20linkgen%20%3D%20moveback%20%3F%20'https%3A%2F%2Fyoutu.be%2F'%20%2B%20path%20%2B%20'%3Ft%3D'%20%2B%20moveback%20%3A%20''%3BmatchingLinks.push(%5Bel.replace(%2F%5Cs*t_%5Cd%2B%5Cs*%2Fg%2C%20'')%2C%20linkgen%5D)%3B%7D)%3B%7Dvar%20resCont%20%3D%20ele('div')%3Battr(resCont%2C%20'id'%2C%20'search_resContainer')%3Battr(resCont%2C%20'style'%2C%20'padding%3A%206px%3B%20max-height%3A%20400px%3B%20overflow-y%3A%20scroll%3B%20overflow-x%3A%20hidden%3B')%3Bbod.appendChild(resCont)%3Bif%20(matches)%20%7BmatchingLinks.forEach(el%20%3D%3E%20%7Bvar%20link%20%3D%20ele('div')%3Battr(link%2C%20'style'%2C%20'padding%3A%206px%3B')%3BresCont.appendChild(link)%3Blink.innerHTML%20%3D%20'%3Ca%20href%3D%22'%20%2B%20el%5B1%5D%20%2B%20'%22%3E'%20%2B%20el%5B0%5D%20%2B%20'%3C%2Fa%3E'%3B%7D)%3B%7Delse%7Bvar%20link%20%3D%20ele('div')%3Battr(link%2C%20'style'%2C%20'padding%3A%206px%3B')%3BresCont.appendChild(link)%3Blink.innerText%20%3D%20'no%20results'%3B%7D%7D%7Dfunction%20kill2xParents()%7Bthis.parentElement.parentElement.outerHTML%20%3D%20''%3B%7Dvar%20tubePath%20%3D%20reg(%2F(%3F%3C%3Dyoutube.com%5C%2Fwatch%5C%3Fv%3D%7Cyoutu.be%5C%2F).%2B%3F(%3F%3D%5C%26%7C%5C%3F%7C%24)%2F.exec(window.location.href)%2C0)%3Bif(tubePath)%20createHTMLSearchBox(tubePath)%7D)()
